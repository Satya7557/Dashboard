<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Interactive Calendar</title>
<style>
  body, html {
    margin: 0;
    padding: 0;
    font-family: Arial, sans-serif;
    background: linear-gradient(135deg, #1a1a1a, #2b1a3a);
    color: #fff;
    min-height: 100vh;
  }

  h1 {
    text-align: center;
    margin: 20px 0;
    text-shadow: 1px 1px 5px #000;
  }

  .top-buttons {
    position: fixed;
    top: 20px;
    right: 20px;
    display: flex;
    flex-direction: column;
    gap: 10px;
  }

  .top-buttons button {
    padding: 5px 10px;
    font-size: 0.9rem;
    border: none;
    border-radius: 5px;
    background: rgba(0,0,0,0.6);
    color: #fff;
    cursor: pointer;
    transition: background 0.2s, transform 0.2s;
  }

  .top-buttons button:hover {
    background: rgba(50,50,50,0.8);
    transform: translateY(-2px);
  }

  .calendar-controls {
    display: flex;
    justify-content: center;
    margin-top: 80px;
    gap: 10px;
  }

  select {
    padding: 5px;
    border-radius: 5px;
    border: none;
    background: rgba(255,255,255,0.1);
    color: #fff;
  }

  select option {
    background: #1a1a1a;
    color: #fff;
  }

  .calendar {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 15px;
    max-width: 1200px;
    margin: 20px auto 80px auto;
  }

  .day {
    background: rgba(0,0,0,0.5);
    border-radius: 15px;
    padding: 10px;
    display: flex;
    flex-direction: column;
    gap: 5px;
    box-shadow: 2px 2px 10px rgba(0,0,0,0.7);
  }

  .day .day-name {
    font-size: 0.8rem;
    text-align: center;
    color: #ccc;
  }

  .day h3 {
    margin: 0;
    font-size: 1rem;
    text-align: center;
  }

  .day input[type="text"] {
    width: 100%;
    padding: 5px;
    border-radius: 5px;
    border: none;
    background: rgba(255,255,255,0.1);
    color: #fff;
    font-size: 0.9rem;
    box-sizing: border-box;
  }

  .day input[type="text"]:focus {
    outline: 2px solid #fff;
  }

  #saveButton {
    position: fixed;
    bottom: 20px;
    right: 20px;
    padding: 5px 10px; /* same size as Import */
    font-size: 0.9rem;
    border: none;
    border-radius: 5px;
    background: rgba(0,0,0,0.6);
    color: #fff;
    cursor: pointer;
    transition: background 0.2s, transform 0.2s;
  }

  #saveButton:hover {
    background: rgba(50,50,50,0.8);
    transform: translateY(-2px);
  }
</style>
</head>
<body>

<h1>Interactive Calendar</h1>

<div class="top-buttons">
  <button id="exportButton">Export</button>
  <button id="importButton">Import</button>
</div>

<div class="calendar-controls">
  <select id="monthSelect"></select>
  <select id="yearSelect"></select>
</div>

<div class="calendar" id="calendar"></div>

<button id="saveButton">Save All</button>

<script>
const calendarEl = document.getElementById('calendar');
const monthSelect = document.getElementById('monthSelect');
const yearSelect = document.getElementById('yearSelect');

const months = ["January","February","March","April","May","June","July","August","September","October","November","December"];
const daysOfWeek = ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];
const currentYear = new Date().getFullYear();

// Populate month/year selectors
months.forEach((m,i)=> monthSelect.add(new Option(m,i)));
for(let y=currentYear-5;y<=currentYear+5;y++) yearSelect.add(new Option(y,y));
monthSelect.value = new Date().getMonth();
yearSelect.value = currentYear;

function generateCalendar(month, year) {
  calendarEl.innerHTML = '';
  const firstDay = new Date(year, month, 1).getDay();
  const daysInMonth = new Date(year, month+1, 0).getDate();

  for(let i=0;i<firstDay;i++){
    const empty = document.createElement('div');
    empty.className='day';
    calendarEl.appendChild(empty);
  }

  for(let d=1; d<=daysInMonth; d++){
    const dayDiv = document.createElement('div');
    dayDiv.className='day';

    const date = new Date(year, month, d);
    const dayName = daysOfWeek[date.getDay()];

    const dayNameDiv = document.createElement('div');
    dayNameDiv.className='day-name';
    dayNameDiv.innerText=dayName;

    const dayNumber = document.createElement('h3');
    dayNumber.innerText=d;

    dayDiv.appendChild(dayNameDiv);
    dayDiv.appendChild(dayNumber);

    for(let t=1;t<=5;t++){
      const input = document.createElement('input');
      input.type='text';
      input.placeholder=`Task ${t}`;

      const key = `${year}-${month}-${d}-task${t}`;
      const saved = localStorage.getItem(key);
      if(saved) input.value = saved;

      dayDiv.appendChild(input);
    }

    calendarEl.appendChild(dayDiv);
  }
}

monthSelect.addEventListener('change',()=>generateCalendar(parseInt(monthSelect.value),parseInt(yearSelect.value)));
yearSelect.addEventListener('change',()=>generateCalendar(parseInt(monthSelect.value),parseInt(yearSelect.value)));

generateCalendar(new Date().getMonth(), currentYear);

// Save all button
document.getElementById('saveButton').addEventListener('click', ()=>{
  const dayDivs = document.querySelectorAll('.day');
  dayDivs.forEach((dayDiv, index)=>{
    const inputs = dayDiv.querySelectorAll('input[type=text]');
    inputs.forEach((input, t)=>{
      const firstDay = new Date(yearSelect.value, monthSelect.value, 1).getDay();
      const d = index + 1 - firstDay;
      if(d>0){
        const key = `${yearSelect.value}-${monthSelect.value}-${d}-task${t+1}`;
        localStorage.setItem(key,input.value);
      }
    });
  });
  alert('All tasks saved locally!');
});

// Export button
document.getElementById('exportButton').addEventListener('click', ()=>{
  const data = {};
  const dayDivs = document.querySelectorAll('.day');
  dayDivs.forEach((dayDiv,index)=>{
    const inputs = dayDiv.querySelectorAll('input[type=text]');
    inputs.forEach((input,t)=>{
      const firstDay = new Date(yearSelect.value, monthSelect.value, 1).getDay();
      const d = index + 1 - firstDay;
      if(d>0){
        const key = `${yearSelect.value}-${monthSelect.value}-${d}-task${t+1}`;
        data[key] = localStorage.getItem(key) || '';
      }
    });
  });
  const blob = new Blob([JSON.stringify(data,null,2)],{type:'application/json'});
  const a=document.createElement('a');
  a.href=URL.createObjectURL(blob);
  a.download='calendar_export.json';
  a.click();
});

// Import button
document.getElementById('importButton').addEventListener('click', ()=>{
  const input = document.createElement('input');
  input.type='file';
  input.accept='application/json';
  input.onchange=e=>{
    const file = e.target.files[0];
    const reader = new FileReader();
    reader.onload=event=>{
      const data = JSON.parse(event.target.result);
      Object.keys(data).forEach(key=>{
        localStorage.setItem(key,data[key]);
      });
      generateCalendar(parseInt(monthSelect.value),parseInt(yearSelect.value));
    };
    reader.readAsText(file);
  };
  input.click();
});
</script>
</body>
</html>
