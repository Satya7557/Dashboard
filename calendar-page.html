<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Interactive Calendar</title>
<style>
  :root {
    --bg-primary: #0a0a0a;
    --bg-secondary: #1a1a1a;
    --text-primary: #ffffff;
    --text-secondary: #cccccc;
    --accent-color: #6a3093;
    --input-bg: rgba(255, 255, 255, 0.1);
    --shadow-color: rgba(0, 0, 0, 0.7);
    --day-bg: rgba(0, 0, 0, 0.5);
    --button-bg: rgba(0, 0, 0, 0.6);
    --button-hover: rgba(50, 50, 50, 0.8);
  }

  .light-theme {
    --bg-primary: #f5f5f5;
    --bg-secondary: #e5e5e5;
    --text-primary: #222222;
    --text-secondary: #555555;
    --accent-color: #8e44ad;
    --input-bg: rgba(0, 0, 0, 0.07);
    --shadow-color: rgba(0, 0, 0, 0.1);
    --day-bg: rgba(255, 255, 255, 0.7);
    --button-bg: rgba(0, 0, 0, 0.1);
    --button-hover: rgba(100, 100, 100, 0.2);
  }

  body, html {
    margin: 0;
    padding: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, var(--bg-primary), var(--bg-secondary));
    color: var(--text-primary);
    min-height: 100vh;
    transition: background 0.3s ease, color 0.3s ease;
  }

  h1 {
    text-align: center;
    margin: 20px 0;
    text-shadow: 1px 1px 3px var(--shadow-color);
    color: var(--text-primary);
  }

  .top-buttons {
    position: fixed;
    top: 20px;
    right: 20px;
    display: flex;
    gap: 10px;
    align-items: center;
  }

  .theme-toggle {
    display: flex;
    align-items: center;
    gap: 5px;
    background: var(--button-bg);
    padding: 5px 10px;
    border-radius: 20px;
    cursor: pointer;
    transition: background 0.2s;
  }

  .theme-toggle:hover {
    background: var(--button-hover);
  }

  .theme-toggle-slider {
    width: 40px;
    height: 20px;
    background-color: #333;
    border-radius: 20px;
    position: relative;
    transition: background-color 0.3s;
  }

  .light-theme .theme-toggle-slider {
    background-color: #8e44ad;
  }

  .theme-toggle-slider:before {
    content: "";
    position: absolute;
    width: 16px;
    height: 16px;
    border-radius: 50%;
    top: 2px;
    left: 2px;
    background-color: white;
    transition: transform 0.3s;
  }

  .light-theme .theme-toggle-slider:before {
    transform: translateX(20px);
  }

  .top-buttons button {
    padding: 5px 10px;
    font-size: 0.9rem;
    border: none;
    border-radius: 5px;
    background: var(--button-bg);
    color: var(--text-primary);
    cursor: pointer;
    transition: background 0.2s, transform 0.2s;
  }

  .top-buttons button:hover {
    background: var(--button-hover);
    transform: translateY(-2px);
  }

  .calendar-controls {
    display: flex;
    justify-content: center;
    margin-top: 80px;
    gap: 10px;
  }

  select {
    padding: 5px;
    border-radius: 5px;
    border: none;
    background: var(--input-bg);
    color: var(--text-primary);
    cursor: pointer;
  }

  select option {
    background: var(--bg-secondary);
    color: var(--text-primary);
  }

  .calendar {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 15px;
    max-width: 1200px;
    margin: 20px auto 80px auto;
    padding: 0 20px;
  }

  .day {
    background: var(--day-bg);
    border-radius: 15px;
    padding: 10px;
    display: flex;
    flex-direction: column;
    gap: 5px;
    box-shadow: 2px 2px 10px var(--shadow-color);
    transition: transform 0.2s;
  }

  .day:hover {
    transform: translateY(-3px);
  }

  .day .day-name {
    font-size: 0.8rem;
    text-align: center;
    color: var(--text-secondary);
  }

  .day h3 {
    margin: 0;
    font-size: 1rem;
    text-align: center;
  }

  .day input[type="text"] {
    width: 100%;
    padding: 5px;
    border-radius: 5px;
    border: none;
    background: var(--input-bg);
    color: var(--text-primary);
    font-size: 0.9rem;
    box-sizing: border-box;
    transition: background 0.2s;
  }

  .day input[type="text"]:focus {
    outline: 2px solid var(--accent-color);
    background: var(--input-bg);
  }

  #saveButton {
    padding: 5px 10px;
    font-size: 0.9rem;
    border: none;
    border-radius: 5px;
    background: var(--button-bg);
    color: var(--text-primary);
    cursor: pointer;
    transition: background 0.2s, transform 0.2s;
  }

  #saveButton:hover {
    background: var(--button-hover);
    transform: translateY(-2px);
  }

  @media (max-width: 768px) {
    .calendar {
      grid-template-columns: repeat(5, 1fr);
    }
  }

  @media (max-width: 576px) {
    .calendar {
      grid-template-columns: repeat(3, 1fr);
    }
    
    .top-buttons {
      flex-direction: column;
      align-items: flex-end;
    }
  }
</style>
</head>
<body>

<h1>Interactive Calendar</h1>

<div class="top-buttons">
  <div class="theme-toggle" id="themeToggle">
    <span>‚òÄÔ∏è</span>
    <div class="theme-toggle-slider"></div>
    <span>üåô</span>
  </div>
  <button id="exportButton">Export</button>
  <button id="importButton">Import</button>
  <button id="saveButton">Save All</button>
</div>

<div class="calendar-controls">
  <select id="monthSelect"></select>
  <select id="yearSelect"></select>
</div>

<div class="calendar" id="calendar"></div>

<script>
const calendarEl = document.getElementById('calendar');
const monthSelect = document.getElementById('monthSelect');
const yearSelect = document.getElementById('yearSelect');
const themeToggle = document.getElementById('themeToggle');

const months = ["January","February","March","April","May","June","July","August","September","October","November","December"];
const daysOfWeek = ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];
const currentYear = new Date().getFullYear();

// Check for saved theme preference or respect OS preference
const prefersDarkScheme = window.matchMedia('(prefers-color-scheme: dark)');
const currentTheme = localStorage.getItem('theme') || (prefersDarkScheme.matches ? 'dark' : 'light');

if (currentTheme === 'light') {
  document.body.classList.add('light-theme');
}

// Populate month/year selectors
months.forEach((m,i)=> monthSelect.add(new Option(m,i)));
for(let y=currentYear-5;y<=currentYear+5;y++) yearSelect.add(new Option(y,y));
monthSelect.value = new Date().getMonth();
yearSelect.value = currentYear;

function generateCalendar(month, year) {
  calendarEl.innerHTML = '';
  const firstDay = new Date(year, month, 1).getDay();
  const daysInMonth = new Date(year, month+1, 0).getDate();

  for(let i=0;i<firstDay;i++){
    const empty = document.createElement('div');
    empty.className='day';
    calendarEl.appendChild(empty);
  }

  for(let d=1; d<=daysInMonth; d++){
    const dayDiv = document.createElement('div');
    dayDiv.className='day';

    const date = new Date(year, month, d);
    const dayName = daysOfWeek[date.getDay()];

    const dayNameDiv = document.createElement('div');
    dayNameDiv.className='day-name';
    dayNameDiv.innerText=dayName;

    const dayNumber = document.createElement('h3');
    dayNumber.innerText=d;

    dayDiv.appendChild(dayNameDiv);
    dayDiv.appendChild(dayNumber);

    for(let t=1;t<=5;t++){
      const input = document.createElement('input');
      input.type='text';
      input.placeholder=`Task ${t}`;

      const key = `${year}-${month}-${d}-task${t}`;
      const saved = localStorage.getItem(key);
      if(saved) input.value = saved;

      dayDiv.appendChild(input);
    }

    calendarEl.appendChild(dayDiv);
  }
}

monthSelect.addEventListener('change',()=>generateCalendar(parseInt(monthSelect.value),parseInt(yearSelect.value)));
yearSelect.addEventListener('change',()=>generateCalendar(parseInt(monthSelect.value),parseInt(yearSelect.value)));

generateCalendar(new Date().getMonth(), currentYear);

// Save all button
document.getElementById('saveButton').addEventListener('click', ()=>{
  const dayDivs = document.querySelectorAll('.day');
  dayDivs.forEach((dayDiv, index)=>{
    const inputs = dayDiv.querySelectorAll('input[type=text]');
    inputs.forEach((input, t)=>{
      const firstDay = new Date(yearSelect.value, monthSelect.value, 1).getDay();
      const d = index + 1 - firstDay;
      if(d>0){
        const key = `${yearSelect.value}-${monthSelect.value}-${d}-task${t+1}`;
        localStorage.setItem(key,input.value);
      }
    });
  });
  alert('All tasks saved locally!');
});

// Export button
document.getElementById('exportButton').addEventListener('click', ()=>{
  const data = {};
  const dayDivs = document.querySelectorAll('.day');
  dayDivs.forEach((dayDiv,index)=>{
    const inputs = dayDiv.querySelectorAll('input[type=text]');
    inputs.forEach((input,t)=>{
      const firstDay = new Date(yearSelect.value, monthSelect.value, 1).getDay();
      const d = index + 1 - firstDay;
      if(d>0){
        const key = `${yearSelect.value}-${monthSelect.value}-${d}-task${t+1}`;
        data[key] = localStorage.getItem(key) || '';
      }
    });
  });
  const blob = new Blob([JSON.stringify(data,null,2)],{type:'application/json'});
  const a=document.createElement('a');
  a.href=URL.createObjectURL(blob);
  a.download='calendar_export.json';
  a.click();
});

// Import button
document.getElementById('importButton').addEventListener('click', ()=>{
  const input = document.createElement('input');
  input.type='file';
  input.accept='application/json';
  input.onchange=e=>{
    const file = e.target.files[0];
    const reader = new FileReader();
    reader.onload=event=>{
      const data = JSON.parse(event.target.result);
      Object.keys(data).forEach(key=>{
        localStorage.setItem(key,data[key]);
      });
      generateCalendar(parseInt(monthSelect.value),parseInt(yearSelect.value));
    };
    reader.readAsText(file);
  };
  input.click();
});

// Theme toggle functionality
themeToggle.addEventListener('click', () => {
  document.body.classList.toggle('light-theme');
  
  let theme = 'dark';
  if (document.body.classList.contains('light-theme')) {
    theme = 'light';
  }
  
  localStorage.setItem('theme', theme);
});
</script>
</body>
</html>
